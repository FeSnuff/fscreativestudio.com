<style>
.catalog-view{max-width:1600px;margin:0 auto;display:grid;grid-template-columns:1fr 350px;gap:30px;animation:fadeIn 0.5s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.filters-section{grid-column:1/-1;background:white;padding:25px;border-radius:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.filters-container{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:20px;align-items:end}
.search-box{position:relative}
.search-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);font-size:20px;color:#6c757d}
.search-input{width:100%;padding:14px 14px 14px 50px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;outline:none}
.search-input:focus{border-color:#667eea;box-shadow:0 0 0 4px rgba(102,126,234,0.1)}
.filter-group{display:flex;flex-direction:column;gap:8px}
.filter-group label{font-weight:600;font-size:14px;color:#333}
.filter-select{padding:14px;border:2px solid #e0e0e0;border-radius:10px;font-size:14px;cursor:pointer;outline:none;background:white}
.tours-section{grid-column:1}
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}
.section-header h2{font-size:28px;color:white;display:flex;align-items:center;gap:10px;margin:0}
.results-count{background:white;padding:8px 16px;border-radius:20px;font-weight:600;color:#667eea;font-size:14px}
.tours-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:25px}
.tour-card{background:white;border-radius:15px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:all 0.3s;cursor:pointer;position:relative}
.tour-card:hover{transform:translateY(-8px);box-shadow:0 8px 32px rgba(0,0,0,0.2)}
.tour-card.selected{border:3px solid #667eea}
.tour-image{position:relative;height:200px;overflow:hidden}
.tour-image img{width:100%;height:100%;object-fit:cover}
.tour-card:hover .tour-image img{transform:scale(1.1)}
.selection-badge{position:absolute;top:10px;left:10px;width:35px;height:35px;border-radius:50%;background:#667eea;color:white;display:flex;align-items:center;justify-content:center;font-weight:bold;opacity:0;transform:scale(0);transition:all 0.3s;z-index:2}
.tour-card.selected .selection-badge{opacity:1;transform:scale(1)}
.add-overlay{position:absolute;inset:0;background:rgba(102,126,234,0.95);display:flex;align-items:center;justify-content:center;opacity:0;transition:all 0.3s}
.tour-card:hover .add-overlay{opacity:1}
.add-icon{font-size:48px;color:white;animation:pulse 1s infinite}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
.tour-content{padding:20px}
.tour-name{font-size:18px;font-weight:600;color:#333;margin-bottom:12px;min-height:50px}
.tour-details{display:flex;justify-content:space-between;align-items:center}
.tour-duration{color:#6c757d;font-size:14px}
.tour-price{font-size:20px;font-weight:bold;color:#667eea}
.cart-sidebar{background:white;border-radius:15px;box-shadow:0 4px 16px rgba(0,0,0,0.15);height:fit-content;position:sticky;top:100px;display:flex;flex-direction:column;max-height:calc(100vh - 120px)}
.cart-header{padding:20px;border-bottom:2px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}
.cart-header h3{font-size:20px;color:#333;display:flex;align-items:center;gap:10px;margin:0}
.cart-count-badge{width:30px;height:30px;border-radius:50%;background:#667eea;color:white;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:14px}
.cart-content{flex:1;overflow-y:auto;padding:20px}
.empty-cart{text-align:center;padding:40px 20px;color:#6c757d}
.empty-icon{font-size:60px;margin-bottom:15px}
.cart-item{display:flex;align-items:center;gap:12px;padding:12px;background:#f8f9fa;border-radius:10px;margin-bottom:10px}
.cart-item-number{width:30px;height:30px;border-radius:50%;background:#667eea;color:white;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:14px;flex-shrink:0}
.cart-item-info{flex:1}
.cart-item-name{font-size:14px;font-weight:600;color:#333;margin-bottom:4px}
.cart-item-price{font-size:14px;color:#667eea;font-weight:600}
.cart-item-remove{width:28px;height:28px;border-radius:50%;border:none;background:#dc3545;color:white;cursor:pointer;flex-shrink:0}
.cart-footer{padding:20px;border-top:2px solid #e0e0e0}
.cart-total{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;font-weight:600;font-size:18px}
.total-amount{color:#667eea;font-size:24px}
.btn-continue{width:100%;padding:16px;border:none;border-radius:10px;background:linear-gradient(135deg,#667eea,#764ba2);color:white;font-size:16px;font-weight:600;cursor:pointer}
.btn-continue:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 32px rgba(0,0,0,0.2)}
.btn-continue:disabled{opacity:0.5;cursor:not-allowed}
@media(max-width:1024px){.catalog-view{grid-template-columns:1fr}.cart-sidebar{display:none}.filters-container{grid-template-columns:1fr}}
@media(max-width:768px){.tours-grid{grid-template-columns:1fr}}
</style>
<div class="catalog-view">
<div class="filters-section">
<div class="filters-container">
<div class="search-box">
<span class="search-icon">üîç</span>
<input type="text" id="searchInput" class="search-input" placeholder="Buscar tours...">
</div>
<div class="filter-group">
<label>Ordenar</label>
<select id="sortFilter" class="filter-select">
<option value="name-asc">Nombre A-Z</option>
<option value="name-desc">Nombre Z-A</option>
<option value="price-asc">Precio ‚Üë</option>
<option value="price-desc">Precio ‚Üì</option>
<option value="duration-asc">Duraci√≥n ‚Üë</option>
<option value="duration-desc">Duraci√≥n ‚Üì</option>
</select>
</div>
<div class="filter-group">
<label>Duraci√≥n</label>
<select id="durationFilter" class="filter-select">
<option value="all">Todas</option>
<option value="1">1 d√≠a</option>
<option value="2">2 d√≠as</option>
<option value="3">3 d√≠as</option>
<option value="4+">4+ d√≠as</option>
</select>
</div>
<div class="filter-group">
<label>Precio</label>
<select id="priceFilter" class="filter-select">
<option value="all">Todos</option>
<option value="0-100">S/ 0-100</option>
<option value="100-200">S/ 100-200</option>
<option value="200-300">S/ 200-300</option>
<option value="300+">S/ 300+</option>
</select>
</div>
</div>
</div>
<div class="tours-section">
<div class="section-header">
<h2><span>üó∫Ô∏è</span>Tours Disponibles</h2>
<div class="results-count"><span id="resultsCount">0</span> tours</div>
</div>
<div class="tours-grid" id="toursGrid"></div>
</div>
<div class="cart-sidebar">
<div class="cart-header">
<h3><span>üìã</span>Mi Itinerario</h3>
<div class="cart-count-badge" id="cartCount">0</div>
</div>
<div class="cart-content" id="cartContent">
<div class="empty-cart">
<div class="empty-icon">üìù</div>
<p>No hay tours seleccionados</p>
</div>
</div>
<div class="cart-footer">
<div class="cart-total">
<span>TOTAL:</span>
<span class="total-amount" id="cartTotal">S/ 0.00</span>
</div>
<button class="btn-continue" id="btnContinue" disabled>Ver Itinerario ‚Üí</button>
</div>
</div>
</div>
<script>
let allTours=[...window.app.tours];
let filteredTours=[...allTours];
let cart=[...window.app.cart];

function render(){
const grid=document.getElementById('toursGrid');
const count=document.getElementById('resultsCount');
count.textContent=filteredTours.length;
if(!filteredTours.length){
grid.innerHTML='<div style="grid-column:1/-1;text-align:center;padding:40px;background:white;border-radius:15px;"><div style="font-size:60px">üîç</div><p style="color:#6c757d">No se encontraron tours</p></div>';
return;
}
grid.innerHTML=filteredTours.map((t,i)=>{
const img=t.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,'_').replace(/^_+|_+$/g,'');
const sel=cart.some(c=>c.id===i);
const num=sel?cart.findIndex(c=>c.id===i)+1:'';
const d=t.duration_days;
const n=d>1?d-1:0;
const dur=n>0?`${d} d√≠as / ${n} noche${n>1?'s':''}`:`${d} d√≠a`;
return `<div class="tour-card ${sel?'selected':''}" data-id="${i}">
<div class="tour-image">
<span class="selection-badge">${num}</span>
<img src="images/${img}/Principal.webp" alt="${t.name}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22300%22%3E%3Crect fill=%22%23ddd%22 width=%22400%22 height=%22300%22/%3E%3Ctext fill=%22%23999%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3E${t.name}%3C/text%3E%3C/svg%3E'">
<div class="add-overlay" onclick="toggle(${i})"><div class="add-icon">‚ûï</div></div>
</div>
<div class="tour-content">
<div class="tour-name">${t.name}</div>
<div class="tour-details">
<div class="tour-duration">üìÖ ${dur}</div>
<div class="tour-price">S/ ${t.price.toFixed(2)}</div>
</div>
</div>
</div>`;
}).join('');
}

function toggle(i){
const t=filteredTours[i];
const idx=cart.findIndex(c=>c.id===i);
if(idx!==-1)cart.splice(idx,1);else cart.push({id:i,...t});
window.app.cart=[...cart];
updateCart();
render();
}

function updateCart(){
const content=document.getElementById('cartContent');
const total=document.getElementById('cartTotal');
const count=document.getElementById('cartCount');
const btn=document.getElementById('btnContinue');
count.textContent=cart.length;
btn.disabled=!cart.length;
const sum=cart.reduce((s,t)=>s+t.price,0);
total.textContent=`S/ ${sum.toFixed(2)}`;
if(!cart.length){
content.innerHTML='<div class="empty-cart"><div class="empty-icon">üìù</div><p>No hay tours seleccionados</p></div>';
}else{
content.innerHTML=cart.map((t,i)=>`<div class="cart-item">
<div class="cart-item-number">${i+1}</div>
<div class="cart-item-info">
<div class="cart-item-name">${t.name}</div>
<div class="cart-item-price">S/ ${t.price.toFixed(2)}</div>
</div>
<button class="cart-item-remove" onclick="toggle(${t.id})">‚úï</button>
</div>`).join('');
}
}

function filter(){
let r=[...allTours];
const search=document.getElementById('searchInput').value.toLowerCase();
if(search)r=r.filter(t=>t.name.toLowerCase().includes(search));
const dur=document.getElementById('durationFilter').value;
if(dur!=='all'){
if(dur==='4+')r=r.filter(t=>t.duration_days>=4);
else r=r.filter(t=>t.duration_days===parseInt(dur));
}
const price=document.getElementById('priceFilter').value;
if(price!=='all'){
const[min,max]=price.split('-');
r=r.filter(t=>max==='+'?t.price>=parseInt(min):t.price>=parseInt(min)&&t.price<=parseInt(max));
}
const sort=document.getElementById('sortFilter').value;
if(sort==='name-asc')r.sort((a,b)=>a.name.localeCompare(b.name));
else if(sort==='name-desc')r.sort((a,b)=>b.name.localeCompare(a.name));
else if(sort==='price-asc')r.sort((a,b)=>a.price-b.price);
else if(sort==='price-desc')r.sort((a,b)=>b.price-a.price);
else if(sort==='duration-asc')r.sort((a,b)=>a.duration_days-b.duration_days);
else if(sort==='duration-desc')r.sort((a,b)=>b.duration_days-a.duration_days);
filteredTours=r;
render();
}

document.getElementById('searchInput').addEventListener('input',filter);
document.getElementById('sortFilter').addEventListener('change',filter);
document.getElementById('durationFilter').addEventListener('change',filter);
document.getElementById('priceFilter').addEventListener('change',filter);
document.getElementById('btnContinue').addEventListener('click',()=>alert('üöß Vista 1 pr√≥ximamente'));

render();
updateCart();
</script>
